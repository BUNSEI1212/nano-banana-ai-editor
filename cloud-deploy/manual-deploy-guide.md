# ğŸš€ Nano Banana æ‰‹åŠ¨éƒ¨ç½²æŒ‡å—

ç”±äºä½ çš„ç³»ç»Ÿæ²¡æœ‰å®‰è£…OpenSSHå®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ‰‹åŠ¨æ–¹å¼éƒ¨ç½²ã€‚

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### 1. å‡†å¤‡æ–‡ä»¶

éœ€è¦ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æ–‡ä»¶ï¼š

**éƒ¨ç½²é…ç½®æ–‡ä»¶** (cloud-deployç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶):
- `.env.production` - ç”Ÿäº§ç¯å¢ƒé…ç½®
- `deploy.sh` - è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
- `ecosystem.config.js` - PM2é…ç½®
- `package.json` - éƒ¨ç½²åŒ…é…ç½®

**åç«¯æºç ** (nano-banana-desktop/backendç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶):
- `server.js` - ä¸»æœåŠ¡æ–‡ä»¶
- `package.json` - ä¾èµ–é…ç½®
- `middleware/` - ä¸­é—´ä»¶ç›®å½•
- `services/` - æœåŠ¡å±‚ç›®å½•
- `utils/` - å·¥å…·å‡½æ•°ç›®å½•
- å…¶ä»–æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•

### 2. ä¸Šä¼ æ–¹å¼é€‰æ‹©

#### æ–¹å¼A: ä½¿ç”¨è…¾è®¯äº‘æ§åˆ¶å°æ–‡ä»¶ç®¡ç†å™¨

1. ç™»å½•è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨æ§åˆ¶å°
2. ç‚¹å‡»"æ–‡ä»¶ç®¡ç†å™¨"
3. è¿›å…¥ `/root/` ç›®å½•
4. åˆ›å»ºæ–‡ä»¶å¤¹ `cloud-deploy`
5. ä¸Šä¼  cloud-deploy ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ° `/root/cloud-deploy/`
6. åˆ›å»ºæ–‡ä»¶å¤¹ `nano-banana-desktop`
7. åœ¨å…¶ä¸­åˆ›å»º `backend` æ–‡ä»¶å¤¹
8. ä¸Šä¼  nano-banana-desktop/backend ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ° `/root/nano-banana-desktop/backend/`

#### æ–¹å¼B: ä½¿ç”¨FTP/SFTPå·¥å…·

æ¨èå·¥å…·ï¼š
- **WinSCP** (Windows)
- **FileZilla** (è·¨å¹³å°)
- **MobaXterm** (Windows)

è¿æ¥ä¿¡æ¯ï¼š
- **ä¸»æœº**: 43.142.153.33
- **ç«¯å£**: 22
- **ç”¨æˆ·å**: root
- **å¯†ç **: (ä½ çš„æœåŠ¡å™¨å¯†ç )

ä¸Šä¼ ç›®å½•ç»“æ„ï¼š
```
/root/
â”œâ”€â”€ cloud-deploy/
â”‚   â”œâ”€â”€ .env.production
â”‚   â”œâ”€â”€ deploy.sh
â”‚   â”œâ”€â”€ ecosystem.config.js
â”‚   â””â”€â”€ package.json
â””â”€â”€ nano-banana-desktop/
    â””â”€â”€ backend/
        â”œâ”€â”€ server.js
        â”œâ”€â”€ package.json
        â”œâ”€â”€ middleware/
        â”œâ”€â”€ services/
        â”œâ”€â”€ utils/
        â””â”€â”€ (æ‰€æœ‰å…¶ä»–æ–‡ä»¶)
```

### 3. è¿æ¥æœåŠ¡å™¨

ä½¿ç”¨ä»¥ä¸‹ä»»ä¸€æ–¹å¼è¿æ¥æœåŠ¡å™¨ï¼š

#### æ–¹å¼A: è…¾è®¯äº‘æ§åˆ¶å°ç»ˆç«¯
1. åœ¨è…¾è®¯äº‘æ§åˆ¶å°ç‚¹å‡»"ç™»å½•"
2. é€‰æ‹©"WebShellç™»å½•"

#### æ–¹å¼B: SSHå®¢æˆ·ç«¯
å¦‚æœä½ æœ‰SSHå®¢æˆ·ç«¯ï¼ˆå¦‚PuTTYã€MobaXtermç­‰ï¼‰ï¼š
```
ssh root@43.142.153.33
```

### 4. æ‰§è¡Œéƒ¨ç½²

è¿æ¥åˆ°æœåŠ¡å™¨åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# 1. è¿›å…¥éƒ¨ç½²ç›®å½•
cd /root/cloud-deploy

# 2. ç»™éƒ¨ç½²è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh

# 3. æ‰§è¡Œéƒ¨ç½²è„šæœ¬
./deploy.sh
```

### 5. éªŒè¯éƒ¨ç½²

éƒ¨ç½²å®Œæˆåï¼Œæ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š

```bash
# æŸ¥çœ‹PM2æœåŠ¡çŠ¶æ€
pm2 status

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
pm2 logs nano-banana-backend

# æµ‹è¯•APIæ¥å£
curl http://localhost:3001/health
```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š
```json
{
  "status": "ok",
  "timestamp": "2024-xx-xxTxx:xx:xx.xxxZ",
  "service": "gemini-proxy"
}
```

### 6. é…ç½®é˜²ç«å¢™

ç¡®ä¿å¼€æ”¾3001ç«¯å£ï¼š

```bash
# ä½¿ç”¨ufw (Ubuntu/Debian)
ufw allow 3001

# æˆ–ä½¿ç”¨iptables
iptables -A INPUT -p tcp --dport 3001 -j ACCEPT
iptables-save
```

### 7. è®¿é—®æœåŠ¡

éƒ¨ç½²æˆåŠŸåï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
- **APIæœåŠ¡**: http://43.142.153.33:3001
- **å¥åº·æ£€æŸ¥**: http://43.142.153.33:3001/health

## ğŸ”§ å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# é‡å¯æœåŠ¡
pm2 restart nano-banana-backend

# åœæ­¢æœåŠ¡
pm2 stop nano-banana-backend

# æŸ¥çœ‹æ—¥å¿—
pm2 logs nano-banana-backend

# ç›‘æ§æœåŠ¡
pm2 monit
```

## â— æ³¨æ„äº‹é¡¹

1. **ç¡®ä¿æœåŠ¡å™¨å·²å®‰è£…Node.js 18+ç‰ˆæœ¬**
2. **ç¡®ä¿é˜²ç«å¢™å¼€æ”¾3001ç«¯å£**
3. **å¦‚æœéƒ¨ç½²å¤±è´¥ï¼ŒæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶æ’æŸ¥é—®é¢˜**
4. **ç”Ÿäº§ç¯å¢ƒå»ºè®®ä¿®æ”¹JWTå¯†é’¥ç­‰æ•æ„Ÿé…ç½®**

## ğŸ†˜ æ•…éšœæ’é™¤

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æ£€æŸ¥Node.jsç‰ˆæœ¬**: `node --version`
2. **æ£€æŸ¥ç«¯å£å ç”¨**: `netstat -tlnp | grep 3001`
3. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**: `pm2 logs nano-banana-backend --lines 50`
4. **æ‰‹åŠ¨å¯åŠ¨æµ‹è¯•**: `cd /www/wwwroot/nano-banana/backend && node server.js`

éœ€è¦å¸®åŠ©æ—¶ï¼Œè¯·æä¾›é”™è¯¯æ—¥å¿—ä¿¡æ¯ã€‚
